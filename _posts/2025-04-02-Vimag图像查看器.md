---
layout: post
title:  Vimag è½»é‡å›¾åƒæŸ¥çœ‹å™¨
date:   2025-04-02 16:10:30 +0300
image:  https://raw.githubusercontent.com/fantasywoc/Vimag/main/src/icons/logo.png
tags:   study  C++

---


# Vimag
![logo](https://raw.githubusercontent.com/fantasywoc/Vimag/main/src/icons/logo.png)     

[![Feature Requests](https://img.shields.io/github/issues/fantasywoc/Vimag/feature-request?label=Features&color=4CC61E&logo=github)](https://github.com/fantasywoc/Vimag/issues?q=is%3Aopen+is%3Aissue+label%3Afeature-request)
[![Bugs](https://img.shields.io/github/issues/fantasywoc/Vimag/bug?label=Bugs&color=red&logo=github)](https://github.com/fantasywoc/Vimag/issues?q=is%3Aopen+is%3Aissue+label%3Abug)
[![Downloads](https://img.shields.io/github/downloads/fantasywoc/Vimag/total?label=Downloads)](https://github.com/fantasywoc/Vimag/releases)
[![Stars](https://img.shields.io/github/stars/fantasywoc/Vimag?label=Stars&color=yellow&logo=github)](https://github.com/fantasywoc/Vimag/stargazers)
[![Forks](https://img.shields.io/github/forks/fantasywoc/Vimag?label=Forks&color=blue&logo=github)](https://github.com/fantasywoc/Vimag/network/members)

# xmakeç¼–è¯‘é¡¹ç›®
## Debugæ¨¡å¼
```xmake config -m debug```

## Releaseæ¨¡å¼
```xmake config -m release```

## æ¸…ç†æ„å»º
```xmake clean```

## ç¼–è¯‘åº“é…ç½®
```xmake g --pkg_searchdirs=./src/thrity_party/```  #æœ¬åœ°åº“æ–‡ä»¶æœç´¢è·¯å¾„
## ç¼–è¯‘
```
xmake
xmake run VIMAG æˆ–è€… xmake run VIMAG image-path/dist
```




# VIMAG


## Vimagæ ¼å¼æ”¯æŒ
   - æ”¯æŒå¤šç§å›¾åƒæ ¼å¼ï¼ˆJPG/JPEG/PNG/BMP/GIF/TGA/HDR/PSDï¼‰
## å¿«æ·é”®
[é¼ æ ‡]/[é”®ç›˜]
- æ»šè½®ï¼šç¼©æ”¾
- å·¦é”®æ‹–æ‹½ï¼šç§»åŠ¨
- å·¦é”®åŒå‡»ï¼šé‡ç½®ç§»åŠ¨å’Œç¼©æ”¾
- å·¦é”®å•å‡»+æ»šè½®||å·¦å³æ–¹å‘é”®ï¼šåˆ‡æ¢å›¾ç‰‡
- ä¸­é”®||"F"ï¼šçª—å£æœ€å¤§åŒ–/æœ€å°åŒ–
- å³é”®å•å‡»ï¼šæ‰“å¼€è®¾ç½®é¢æ¿
- é¼ æ ‡ç§»å…¥çª—å£ä¸Šè¾¹ç¼˜ï¼šæ˜¾ç¤ºæ ‡é¢˜æ 

- **é¢„è§ˆ**ï¼šé€‰ä¸­å›¾ç‰‡åï¼Œç©ºæ ¼é¢„è§ˆ/å…³é—­é¢„è§ˆå›¾åƒ(ä»…æ”¯æŒwindows)(éœ€è¦å¯ç”¨Vimag_hook)
[windows Vimag_hook]
windows è¿è¡Œdist/Vimag_hook å¯ä»¥å¯ç”¨é¢„è§ˆé’©å­,
**Vimag_hookéœ€è¦å’ŒVimagæ”¾åœ¨åŒä¸€ç›®å½•ä¸‹**
èµ„æºæµè§ˆå™¨é‡Œé¢é€‰ä¸­æ‰€æ”¯æŒçš„å›¾åƒæ ¼å¼ç‚¹å‡»**ç©ºæ ¼**å¯ä»¥é¢„è§ˆå›¾åƒ
- æ‰˜ç›˜å¯ä»¥é…ç½®
    - å¯ç”¨/ç¦æ­¢
    - å¼€å§‹/æš‚åœ
    - å¼€æœºè‡ªå¯
    - å¼€å¯/å…³é—­æ§åˆ¶å°(ä»…ä¾›ç®€å•è°ƒè¯•ä½¿ç”¨)

## é¡¹ç›®ç»“æ„

```
UI/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ animation       # åŠ¨ç”»ç±»
â”‚   â”œâ”€â”€ component       # ç»„ä»¶ç±»
â”‚   â”œâ”€â”€ TinyEXIF        # EXIF
â”‚   â”œâ”€â”€ third_party     # åº“
â”‚   â”œâ”€â”€ utils           # å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ font            # å­—ä½“ç±»
â”‚   â”œâ”€â”€ icon            # å›¾åƒèµ„æº
â”‚   â”œâ”€â”€ UIWindow.h      # UIWindow ç±»å¤´æ–‡ä»¶
â”‚   â”œâ”€â”€ UIWindow.cpp    # UIWindow ç±»å®ç°
â”‚   â””â”€â”€ Vimag.cpp       # Vimag ç¨‹åº
â”œâ”€â”€ xmake.lua           # æ„å»ºé…ç½®
â””â”€â”€ README.md           # é¡¹ç›®è¯´æ˜
```


## ä¾èµ–åº“

- **GLFW 3.3.8**: çª—å£ç®¡ç†å’Œè¾“å…¥å¤„ç†
- **GLEW 1.13.0**: OpenGL æ‰©å±•åŠ è½½
- **NanoVG**: 2D çŸ¢é‡å›¾å½¢æ¸²æŸ“


# UI æ¡†æ¶

åŸºäº GLFWã€OpenGL å’Œ NanoVG å¼€å‘çš„ UI çª—å£é¡¹ç›®,ã€‚
## ç‰¹æ€§

- âœ… è·¨å¹³å°æ”¯æŒï¼ˆWindows/Linuxï¼‰
- âœ… Openglæ¸²æŸ“
- âœ… é€æ˜çª—å£æ”¯æŒ
- âœ… äº‹ä»¶å›è°ƒç³»ç»Ÿ
- âœ… è‡ªåŠ¨èµ„æºç®¡ç†
- âœ… NanoVG é›†æˆ

## UIWindow ç±»çš„ä¸»è¦åŠŸèƒ½

### 1. çª—å£ç®¡ç†
- åˆ›å»ºã€åˆå§‹åŒ–ã€æ¸…ç†GLFWçª—å£
- çª—å£ç”Ÿå‘½å‘¨æœŸç®¡ç†
- è‡ªåŠ¨èµ„æºæ¸…ç†

### 2. æ¸²æŸ“ä¸Šä¸‹æ–‡
- ç®¡ç†OpenGLå’ŒNanoVGä¸Šä¸‹æ–‡
- è‡ªåŠ¨åˆå§‹åŒ–GLEW
- æä¾›ç»Ÿä¸€çš„æ¸²æŸ“ç¯å¢ƒ

### 3. äº‹ä»¶å¤„ç†
- å°è£…é¼ æ ‡ã€é”®ç›˜äº‹ä»¶å¤„ç†
- ç®€åŒ–è¾“å…¥çŠ¶æ€æŸ¥è¯¢
- æ”¯æŒå…‰æ ‡ä½ç½®è·å–

### 4. æ¸²æŸ“å¾ªç¯
- æä¾›ä¾¿æ·çš„æ¸²æŸ“å¼€å§‹/ç»“æŸæ–¹æ³•
- è‡ªåŠ¨å¤„ç†å¸§ç¼“å†²åŒºç®¡ç†
- ç®€åŒ–æ¸²æŸ“æµç¨‹

### 5. å›è°ƒç³»ç»Ÿ
- æ”¯æŒè‡ªå®šä¹‰äº‹ä»¶å›è°ƒå‡½æ•°
- é”®ç›˜ã€é¼ æ ‡ã€çª—å£å¤§å°å˜åŒ–å›è°ƒ
- ç±»å‹å®‰å…¨çš„å›è°ƒæ¥å£

### 6. çª—å£å±æ€§
- é€æ˜åº¦ã€å¤§å°ç­‰å±æ€§è®¾ç½®
- é€æ˜å¸§ç¼“å†²åŒºæ”¯æŒ
- çµæ´»çš„çª—å£é…ç½®é€‰é¡¹


# xmake ä»£ç æç¤ºå’Œè¡¥å…¨é…ç½®
## clangd é…ç½®xmake ä»£ç æç¤ºå’Œè¡¥å…¨
## clangdå®‰è£…
(ä»¥ VSCode ä¸ºä¾‹)å®‰è£… â€‹**vscode-clangd**â€‹ æ’ä»¶ï¼ˆåœ¨æ‰©å±•å•†åº—æœç´¢å®‰è£…ï¼‰
ç„¶åä¸‹è½½å®‰è£…â¬```https://github.com/llvm/llvm-project/releases``` ,binè·¯å¾„æ·»åŠ åˆ°ç¯å¢ƒå˜é‡
##é…ç½®xmake(â€‹æ ¸å¿ƒé…ç½®æ­¥éª¤â€‹)
1. ç”Ÿæˆ compile_commands.jsonï¼ˆç¼–è¯‘æ•°æ®åº“ï¼‰â€‹â€‹

è‡ªåŠ¨æ›´æ–°â€‹ï¼šåœ¨ xmake.lua ä¸­æ·»åŠ è§„åˆ™ï¼š
```lua
add_rules("plugin.compile_commands.autoupdate", { outputdir = ".vscode" })
```
æ‰‹åŠ¨ç”Ÿæˆâ€‹ï¼šåœ¨é¡¹ç›®æ ¹ç›®å½•æ‰§è¡Œï¼š
```bash
xmake project -k compile_commands
```
é»˜è®¤ç”Ÿæˆåœ¨é¡¹ç›®æ ¹ç›®å½•ï¼Œå¯é€šè¿‡ --outputdir=.vscode æŒ‡å®šè¾“å‡ºåˆ° .vscode ç›®å½•ã€‚
æ¯æ¬¡ç¼–è¯‘æ—¶è‡ªåŠ¨æ›´æ–°è¯¥æ–‡ä»¶ã€‚
2.  é…ç½® VS Code çš„ Clangd æ’ä»¶â€‹
åœ¨ .vscode/settings.json ä¸­æŒ‡å®šç¼–è¯‘æ•°æ®åº“è·¯å¾„ï¼š

```json
{
  "clangd.arguments": [
    "--compile-commands-dir=${workspaceFolder}/.vscode",  // æŒ‡å‘ compile_commands.json æ‰€åœ¨ç›®å½•
    "--header-insertion=never",                           // ç¦æ­¢è‡ªåŠ¨æ’å…¥å¤´æ–‡ä»¶
    "--completion-style=detailed"                         // å¯ç”¨è¯¦ç»†è¡¥å…¨æç¤º
  ]
}
```
è‹¥æ–‡ä»¶åœ¨æ ¹ç›®å½•ï¼Œåˆ™è·¯å¾„æ”¹ä¸º ${workspaceFolder}



## ğŸ“Š åŠ¨æ€ç»Ÿè®¡
[![GitHub Stars](https://img.shields.io/github/stars/fantasywoc/Vimag.svg)](https://github.com/fantasywoc/Vimag/stargazers)
[![GitHub Forks](https://img.shields.io/github/forks/fantasywoc/Vimag.svg)](https://github.com/fantasywoc/Vimag/network/members)


é¡¹ç›®æ¦‚è§ˆ 

[![Stats](https://github-readme-stats.vercel.app/api?username=fantasywoc&repo=Vimag&show_icons=true)]() 




## è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨å¼€æºè®¸å¯è¯ï¼Œå…·ä½“è¯·æŸ¥çœ‹ LICENSE æ–‡ä»¶ã€‚
